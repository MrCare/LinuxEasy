# 文件系统管理

## 1. 分区和文件系统

分区类型：

| 类型   | 说明                                                              |
| ---- | --------------------------------------------------------------- |
| 主分区  | 总共最多只能分四个                                                       |
| 扩展分区 | 只有一个，也算是主分区的一种，主+扩 最多只有4个，但是扩展分区不能储存数据和格式化，必须再划分成逻辑分区才能使用       |
| 逻辑分区 | 是在扩展分区中划分的，如果是IDE硬盘，Linux最多支持59个逻辑分区，如果是SCSI硬盘，LInux最多支持11个逻辑分区 |

分区设备文件名：

| 分区    | 文件名         |
| ----- | ----------- |
| 主分区1  | `/dev/sda1` |
| 扩展分区  | `/dev/sda2` |
| 逻辑分区1 | `/dev/sda5` |
| 逻辑分区2 | `/dev/sda6` |
| 逻辑分区3 | `/dev/sda7` |

文件系统：

- ext2：是ext文件系统的升级版，RedHat Linux 7.2 版本以前的系统默认都是ext2文件系统，1993年发布，最大支持16TB分区和最大2TB的文件

- ext3：与ext2类似，增加日志功能，可靠性高

- ext4：CentOS6.3以后使用，革命性变化(1EB = 1024PB = 1024 * 1024TB)

## 2. 文件系统常用命令

### df

`df` + 选项 + 挂载点    #查看分区使用情况

| 选项   | 作用                                      |
| ---- | --------------------------------------- |
| `-a` | 显示所有文件系统信息，包括特殊文件系统，如`/proc` & `/sysfs` |
| `-h` | 使用习惯单位显示容量                              |
| `-T` | 显示文件系统类型                                |
| `-m` | 以MB为单位显示容量                              |
| `-K` | 以KB为单位显示容量，默认以KB为单位                     |

### du

`du` + 选项 + 文件名    #统计目录与文件大小

| 选项   | 作用                           |
| ---- | ---------------------------- |
| `-a` | 显示每个子文件的磁盘占用量，默认只统计子目录的磁盘占用量 |
| `-h` | 使用习惯单位显示磁盘占用量，如KB，MB或GB等     |
| `-s` | 统计总占用量，而不列出子目录和子文件的占用量       |

与`df`的区别：

- `df` 是从文件系统考虑的，不光要考虑文件占用的空间，还要统计被命令或程序占用的空间（最常见的是文件已经删除但程序并未释放空间）

- `du` 是面向文件的，只会计算文件or目录占用的空间

- Linux 应定期重启，还原状态（每周or每月重启）释放缓存

### 其他命令

文件系统修复命令：

- `fsck` + 选项 + 分区设备文件名

| 选项   | 作用                |
| ---- | ----------------- |
| `-a` | 不用显示用户提示，自动修复文件系统 |
| `-y` | 自动修复，有些文件只支持`-y`  |

显示磁盘状态命令：

- `dumpe2fs` + 分区设备文件名

挂载命令：

- `mount -l`    #查询系统中已经挂载的设备，会显示卷标名

- `mount -a`    #依据配置文件`/etc/fstab`的内容，自动挂载

挂载命令格式：

- `mount` + 选项 + 设备名 + 挂载点

| 选项          | 作用                     |
| ----------- | ---------------------- |
| `-t` + 文件系统 | 加入文件系统来指定挂载类型可以 ext4 等 |
| `-L` + 卷标名  | 挂载指定卷标分区               |
| `-o`        | 特殊选项                   |

挂载U盘：

- `fdisk -l` 查看U盘设备文件名    #U盘Linux默认不支持 NTFS 文件系统

- 可以使用 NTFS -3G 插件支持NTFS文件系统

## 3. fdisk 分区


