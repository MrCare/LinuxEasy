# Vim 文本编辑器

Vim 功能强大，作用是建立，编辑，显示文本文件

## 1. 工作模式

启动

- `vi` + filename

- `vim` + filename

- 进入文件 or 创建并进入文件

默认进入命令模式

- `i`, `a`,`o` 编辑文本（插入）

编辑模式

- 在命令模式下输入`:`    #进入编辑模式

- `:set number` or `:set nu`    #显示行号

- `:wq`    #保存退出 Vim

- `Esc`    #从编辑模式退出到命令模式

## 2. 常用命令

### 插入命令

命令模式

| 命令  | 作用         |
| --- | ---------- |
| `a` | 在光标所在字符后插入 |
| `A` | 在行尾插入      |
| `i` | 在光标所在字符前插入 |
| `I` | 在行首插入      |
| `o` | 在光标下插入新行   |
| `O` | 在光标上插入新行   |

### 定位命令

命令模式 and  编辑模式

| 命令                             | 作用          |
| ------------------------------ | ----------- |
| `:set nu` or `:set number`     | 显示行号        |
| `:set nonu` or `:set nonumber` | 取消显示行号      |
| `gg`                           | 到文件首        |
| `G`                            | 到文件末尾       |
| `nG`                           | go to n row |
| `:n`                           | go to n row |
| `$`                            | 到行尾         |
| `0`    #零                      | 到行首         |

### 删除命令

命令模式 and 编辑模式

| 命令        | 作用                 |
| --------- | ------------------ |
| `x`       | 删除光标所在处字符          |
| `nx`      | 删除光标所在处后n个字符       |
| `dd`      | 删除光标所在行，`ndd` 删除n行 |
| `dG`      | 删除光标所在位置到文件末尾      |
| `D`       | 删除光标所在之处到行尾的内容     |
| `:n1,n2d` | 删除指定范围的行           |

### 复制和剪切命令

命令模式

| 命令    | 作用        |
| ----- | --------- |
| `yy`  | 复制光标所在行   |
| `nyy` | 复制光标下n行   |
| `dd`  | 剪切光标所在行   |
| `ndd` | 剪切光标下n行   |
| `p`   | 粘贴光标所在行下面 |
| `P`   | 粘贴光标所在行上面 |

### 替换和取消命令

命令模式 and 编辑模式

| 命令                  | 作用                   |
| ------------------- | -------------------- |
| `r`                 | 取代光标所在字符，按 `ESC` 结束  |
| `R`                 | 从光标所在处开始替换字符，`Esc`结束 |
| `u`                 | undo，取消上一步操作         |
| `/string`           | 查询制定字符串，`n`下一个       |
| `:set ic`           | 搜索时忽略大小写             |
| `:%s/old/new/g`     | 全文替换制定字符串            |
| `:n1,n2/old/new/g`  | 在一定范围内替换制定字符串        |
| `:%s/old/new/c`     | 询问是否替换               |
| `:n1,n2s/old/new/c` | 询问是否替换               |

### 保存和退出命令

命令模式 and 编辑模式

| 命令         | 作用                           |
| ---------- | ---------------------------- |
| `:w`       | 保存                           |
| `:w` + 文件名 | 另存为其他文件                      |
| `:wq`      | 保存并退出                        |
| `:q!`      | 不保存并退出                       |
| `:wq!`     | 保存修改并退出（文件所有者及root可使用）无视指读权限 |
| `ZZ`       | 快捷键，保存并退出                    |

## 3. 使用技巧

### 导入命令执行结果

- `:r` + 文件名    #导入一个文件内容到刚刚光标所在位置

- `:!` + 命令    #不退出 Vim 情况下执行操作命令

- eg：`:r !date`    #将date导入当前文本中

### 定义快捷键

`:map` + 快捷键 + 触发命令

- `ctrl + v + 键`    #三个键一起按，或者先`ctrl + v` 后 `ctrl + p`

- `:map` + `ctrl + v + p` + `I#<ESC>`    #在行首插入#并退出编辑模式 快捷键:`ctrl + p`

### 连续行注释

- `:n1,n2s/^/#/g`    #批量注释

- `:n1,n2s/^#//g`    #将行首注释取消

### 制定字符替换

- `:ab` + 替换成的字符 + 待替换字符

- eg：`ab mymail 18s033074@stu.hit.edu`    #在编辑模式中输入 mymail 会自动变成后面的邮箱

### 设置永久生效

重启时快捷键会消失

方法：将配置文件放入用户根目录下

- `.vimrc`    #新的vim配置文件

```bash
vim ~/.vimrc

set nu    #显示行号
map ^P I#<ESC>    #在行首添加注释
ab mymail 534192336@qq.com
```
